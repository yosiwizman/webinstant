# WebInstant Smoke Report
Timestamp: 2025-09-12T12:09:14.013Z

## Summary
- FAIL - GET /api/health/config
- PASS - Resolved Supabase REST base
- PASS - Supabase REST reachability
- PASS - Table reachable: businesses
- PASS - Table reachable: website_previews
- PASS - Table reachable: email_logs
- PASS - Table reachable: email_queue
- PASS - Table reachable: email_templates
- PASS - Table reachable: api_usage
- PASS - Table reachable: operations_log
- PASS - Table reachable: ab_tests
- FAIL - GET /api/admin/kpis
- FAIL - POST /api/admin/email/test
- FAIL - POST /api/generate-preview-batch
- FAIL - Verify previews count >= 5
- PASS - email_templates reachable via REST
- PASS - email_queue reachable via REST

## Details
### GET /api/health/config
Status: FAIL
```json
{
  "error": ""
}
```
### Resolved Supabase REST base
Status: PASS
```json
{
  "supabaseUrl": "https://gidhshkekazxdbhlvoiw.supabase.co",
  "restBase": "https://gidhshkekazxdbhlvoiw.supabase.co/rest/v1",
  "suspect": false
}
```
### Supabase REST reachability
Status: PASS
```json
{
  "status": 401
}
```
### Table reachable: businesses
Status: PASS
```json
{
  "ok": true,
  "status": 401
}
```
### Table reachable: website_previews
Status: PASS
```json
{
  "ok": true,
  "status": 401
}
```
### Table reachable: email_logs
Status: PASS
```json
{
  "ok": true,
  "status": 401
}
```
### Table reachable: email_queue
Status: PASS
```json
{
  "ok": true,
  "status": 401
}
```
### Table reachable: email_templates
Status: PASS
```json
{
  "ok": true,
  "status": 401
}
```
### Table reachable: api_usage
Status: PASS
```json
{
  "ok": true,
  "status": 401
}
```
### Table reachable: operations_log
Status: PASS
```json
{
  "ok": true,
  "status": 401
}
```
### Table reachable: ab_tests
Status: PASS
```json
{
  "ok": true,
  "status": 401
}
```
### GET /api/admin/kpis
Status: FAIL
```json
{
  "error": ""
}
```
### POST /api/admin/email/test
Status: FAIL
```json
{
  "error": "",
  "hasResendKey": true
}
```
### POST /api/generate-preview-batch
Status: FAIL
```json
{
  "error": ""
}
```
### Verify previews count >= 5
Status: FAIL
```json
{
  "error": ""
}
```
### email_templates reachable via REST
Status: PASS
```json
{
  "status": 401
}
```
### email_queue reachable via REST
Status: PASS
```json
{
  "status": 401
}
```

## Actionable Fixes

## Appendix
### supabase-index.txt
```
{"message":"Invalid API key","hint":"Double check your Supabase `anon` or `service_role` API key."}
```

## PowerShell (reproduce)
```powershell
# From repo root
Set-Location "C:\\Users\\yosiw\\Desktop\\webinstant"

# Ensure env is present
if (!(Test-Path .env.local)) { Copy-Item .env.example .env.local }

# Install & build
npm ci
npm run build

# Start dev server in background
Start-Process powershell -ArgumentList 'npm run dev' -WindowStyle Minimized

# Wait for port 3000
$retries=30; while ($retries -gt 0) {
  try { (Invoke-WebRequest "http://localhost:3000/api/health/config" -UseBasicParsing -TimeoutSec 3) | Out-Null; break }
  catch { Start-Sleep -Seconds 1; $retries-- }
}

# Run smoke
npm run smoke -- --base http://localhost:3000

# Open the report
Invoke-Item ".\reports\smoke"
```